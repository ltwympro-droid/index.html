<!-- –í–°–¢–ê–í –£–°–ï –ó–ê–ú–Ü–°–¢–¨ –°–í–û–ì–û –§–ê–ô–õ–£ -->

<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Invest PRO 3.2 ($)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
 --bg:#f4f6f9;
 --card:#ffffff;
 --text:#1b1f24;
 --accent:#2563eb;
 --soft:#eef2ff;
 --border:#e5e7eb;
}
body.dark{
 --bg:#0f172a;
 --card:#1e293b;
 --text:#f1f5f9;
 --accent:#3b82f6;
 --soft:#1e3a8a;
 --border:#334155;
}
body{
 font-family:-apple-system,BlinkMacSystemFont,sans-serif;
 background:var(--bg);
 color:var(--text);
 padding:30px;
}
.card{
 background:var(--card);
 padding:30px;
 border-radius:20px;
 max-width:1150px;
 margin:auto;
 border:1px solid var(--border);
}
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:40px;
}
.field{margin-bottom:18px;}
label{font-weight:600;display:block;margin-bottom:6px;}
input,select{
 width:100%;
 padding:12px;
 border-radius:10px;
 border:1px solid var(--border);
}
button{
 padding:12px 18px;
 border:none;
 background:var(--accent);
 color:white;
 border-radius:12px;
 font-weight:600;
 cursor:pointer;
 margin-right:10px;
}
.result{
 margin-top:25px;
 padding:25px;
 background:var(--soft);
 border-radius:16px;
}
.highlight{
 font-size:22px;
 font-weight:700;
 color:var(--accent);
}
.small{
 font-size:13px;
 opacity:0.8;
 margin-top:6px;
}
.section-title{
 font-weight:700;
 margin-top:20px;
}
</style>
</head>

<body>

<div class="card">

<h2>Invest PRO 3.2 ($)</h2>

<button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
<button onclick="generatePDF()">PDF</button>

<div class="field">
<label>–†–µ–∂–∏–º</label>
<select id="mode">
<option value="flip">–§–ª—ñ–ø</option>
<option value="rent">–û—Ä–µ–Ω–¥–∞</option>
</select>
</div>

<div class="grid">

<div>

<div class="field">
<label>–¶—ñ–Ω–∞ –∫—É–ø—ñ–≤–ª—ñ ($)</label>
<input type="number" id="buy" value="60000">
</div>

<div class="field">
<label>–î–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="extra" value="10000">
</div>

<div class="flip">
<div class="field">
<label>–¢–µ—Ä–º—ñ–Ω (—Ä–æ–∫–∏)</label>
<input type="number" id="years" value="2">
</div>

<div class="field">
<label>–¶—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É ($)</label>
<input type="number" id="sell">
</div>

<div class="field">
<label>–ê–ë–û –±–∞–∂–∞–Ω–∞ —Ä—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (%)</label>
<input type="number" id="targetAnnual">
</div>
</div>

<div class="rent" style="display:none;">
<div class="field">
<label>–û—Ä–µ–Ω–¥–∞ –≤ –º—ñ—Å—è—Ü—å ($)</label>
<input type="number" id="rentMonthly">
</div>

<div class="field">
<label>–†—ñ—á–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="rentExpenses" value="1500">
</div>

<div class="field">
<label>–ê–ë–û –±–∞–∂–∞–Ω–∞ –æ–∫—É–ø–Ω—ñ—Å—Ç—å (—Ä–æ–∫—ñ–≤)</label>
<input type="number" id="targetPayback">
</div>
</div>

<button onclick="calculate()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>

</div>

<div>
<div class="result" id="output"></div>
<canvas id="chart" style="margin-top:20px;"></canvas>
</div>

</div>
</div>

<script>

const $=id=>document.getElementById(id);
let chart;

$("mode").addEventListener("change",()=>{
 const mode=$("mode").value;
 document.querySelector(".flip").style.display=mode==="flip"?"block":"none";
 document.querySelector(".rent").style.display=mode==="rent"?"block":"none";
});

function toggleTheme(){
 document.body.classList.toggle("dark");
}

function calculate(){

 const mode=$("mode").value;
 const buy=+$("buy").value;
 const extra=+$("extra").value;
 const total=buy+extra;

 if(chart) chart.destroy();

 // ---------- FLIP ----------
 if(mode==="flip"){

  const years=+$("years").value;
  const sell=+$("sell").value;
  const targetAnnual=+$("targetAnnual").value;

  if(sell){

   const profit=sell-total;
   const roi=(profit/total)*100;
   const annual=(Math.pow((sell/total),(1/years))-1)*100;

   let recommendation="";
   if(annual>25) recommendation="–ê–≥—Ä–µ—Å–∏–≤–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è";
   else if(annual>15) recommendation="–°–∏–ª—å–Ω–∏–π —ñ–Ω–≤–µ—Å—Ç";
   else recommendation="–ü–æ–º—ñ—Ä–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å";

   $("output").innerHTML=`
   <div class="highlight">$${total}</div>
   –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è<br><br>

   <div class="highlight">$${profit}</div>
   –ß–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫<br><br>

   <div class="highlight">${annual.toFixed(2)}%</div>
   –†—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å<br>

   <div class="small">${recommendation}</div>

   <div class="section-title">–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –¥–ª—è —Ä—ñ–µ–ª—Ç–æ—Ä–∞</div>
   ROI = (–ü—Ä–∏–±—É—Ç–æ–∫ / –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è) √ó 100<br>
   Annual = (Sell / Investment)^(1/—Ä–æ–∫–∏) ‚àí 1
   `;

   const values=[];
   for(let i=0;i<=years;i++){
    values.push(total*Math.pow((sell/total),(i/years)));
   }

   chart=new Chart($("chart"),{
    type:"line",
    data:{
     labels:values.map((_,i)=>"–†—ñ–∫ "+i),
     datasets:[{
      label:"–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –∫–∞–ø—ñ—Ç–∞–ª—É",
      data:values,
      borderColor:"#2563eb",
      fill:false
     }]
    }
   });

  } else if(targetAnnual){

   const neededSell=total*Math.pow((1+targetAnnual/100),years);

   $("output").innerHTML=`
   <div class="highlight">$${neededSell.toFixed(0)}</div>
   –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É<br>

   <div class="section-title">–§–æ—Ä–º—É–ª–∞</div>
   Sell = Investment √ó (1 + r)^n
   `;
  }

 }

 // ---------- RENT ----------
 if(mode==="rent"){

  const rent=+$("rentMonthly").value;
  const expenses=+$("rentExpenses").value;
  const targetPayback=+$("targetPayback").value;

  if(rent){

   const annualIncome=rent*12;
   const net=annualIncome-expenses;
   const roi=(net/total)*100;
   const payback=total/net;

   $("output").innerHTML=`
   <div class="highlight">$${net}</div>
   –ß–∏—Å—Ç–∏–π —Ä—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥<br><br>

   <div class="highlight">${payback.toFixed(1)} —Ä–æ–∫—ñ–≤</div>
   –û–∫—É–ø–Ω—ñ—Å—Ç—å<br>

   <div class="section-title">–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –¥–ª—è —Ä—ñ–µ–ª—Ç–æ—Ä–∞</div>
   ROI = –ß–∏—Å—Ç–∏–π —Ä—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥ / –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è<br>
   Payback = –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è / –ß–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥
   `;

  } else if(targetPayback){

   const neededNet=total/targetPayback;
   const neededRent=(neededNet+expenses)/12;

   $("output").innerHTML=`
   <div class="highlight">$${neededRent.toFixed(0)} / –º—ñ—Å</div>
   –ü–æ—Ç—Ä—ñ–±–Ω–∞ –æ—Ä–µ–Ω–¥–∞<br>

   <div class="section-title">–§–æ—Ä–º—É–ª–∞</div>
   Rent = (Investment / Payback + Expenses) / 12
   `;
  }

 }

}

async function generatePDF(){

 const { jsPDF } = window.jspdf;
 const doc=new jsPDF();
 doc.text("Invest PRO Report",20,20);

 const text=document.getElementById("output").innerText;
 doc.text(text,20,40);

 doc.save("Invest_PRO_Report.pdf");
}

calculate();

</script>

</body>
</html>
