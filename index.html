<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Invest PRO 3.1 ($)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
 --bg:#f4f6f9;
 --card:#ffffff;
 --text:#1b1f24;
 --accent:#2563eb;
 --result:#eef2ff;
}
body.dark{
 --bg:#0f172a;
 --card:#1e293b;
 --text:#f1f5f9;
 --accent:#3b82f6;
 --result:#1e3a8a;
}
body{
 font-family:-apple-system,BlinkMacSystemFont,sans-serif;
 background:var(--bg);
 color:var(--text);
 padding:30px;
}
.card{
 background:var(--card);
 padding:25px;
 border-radius:16px;
 max-width:1100px;
 margin:auto;
}
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:30px;
}
.field{margin-bottom:15px;}
label{font-weight:600;display:block;margin-bottom:6px;}
input,select{
 width:100%;
 padding:10px;
 border-radius:8px;
 border:1px solid #ccc;
}
button{
 padding:12px 18px;
 border:none;
 background:var(--accent);
 color:white;
 border-radius:10px;
 font-weight:600;
 cursor:pointer;
 margin-top:10px;
 margin-right:10px;
}
.result{
 margin-top:25px;
 padding:20px;
 background:var(--result);
 border-radius:12px;
}
</style>
</head>

<body>

<div class="card">

<h2>Invest PRO 3.1 ($)</h2>

<button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
<button onclick="generatePDF()">PDF</button>

<div class="field">
<label>–†–µ–∂–∏–º</label>
<select id="mode">
<option value="flip">–§–ª—ñ–ø</option>
<option value="rent">–û—Ä–µ–Ω–¥–∞</option>
</select>
</div>

<div class="grid">

<div>

<div class="field">
<label>–¶—ñ–Ω–∞ –∫—É–ø—ñ–≤–ª—ñ ($)</label>
<input type="number" id="buy" value="60000">
</div>

<div class="field">
<label>–î–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="extra" value="10000">
</div>

<!-- FLIP -->
<div class="flip">

<div class="field">
<label>–¢–µ—Ä–º—ñ–Ω (—Ä–æ–∫–∏)</label>
<input type="number" id="years" value="2">
</div>

<div class="field">
<label>–¶—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É ($) (–∑–∞–ª–∏—à –ø—É—Å—Ç–∏–º —è–∫—â–æ —Ä–∞—Ö—É—î–º–æ –≤—ñ–¥ %)</label>
<input type="number" id="sell">
</div>

<div class="field">
<label>–ê–ë–û –±–∞–∂–∞–Ω–∞ —Ä—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (%)</label>
<input type="number" id="targetAnnual">
</div>

</div>

<!-- RENT -->
<div class="rent" style="display:none;">

<div class="field">
<label>–û—Ä–µ–Ω–¥–∞ –≤ –º—ñ—Å—è—Ü—å ($) (–∑–∞–ª–∏—à –ø—É—Å—Ç–∏–º —è–∫—â–æ —Ä–∞—Ö—É—î–º–æ –≤—ñ–¥ –æ–∫—É–ø–Ω–æ—Å—Ç—ñ)</label>
<input type="number" id="rentMonthly">
</div>

<div class="field">
<label>–†—ñ—á–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="rentExpenses" value="1500">
</div>

<div class="field">
<label>–ê–ë–û –±–∞–∂–∞–Ω–∞ –æ–∫—É–ø–Ω—ñ—Å—Ç—å (—Ä–æ–∫—ñ–≤)</label>
<input type="number" id="targetPayback">
</div>

</div>

<button onclick="calculate()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>

</div>

<div>
<div class="result" id="output"></div>
<canvas id="chart" style="margin-top:20px;"></canvas>
</div>

</div>
</div>

<script>

const $=id=>document.getElementById(id);
let chart;

$("mode").addEventListener("change",()=>{
 const mode=$("mode").value;
 document.querySelector(".flip").style.display=mode==="flip"?"block":"none";
 document.querySelector(".rent").style.display=mode==="rent"?"block":"none";
});

function toggleTheme(){
 document.body.classList.toggle("dark");
}

function calculate(){

 const mode=$("mode").value;
 const buy=+$("buy").value;
 const extra=+$("extra").value;
 const total=buy+extra;

 if(chart) chart.destroy();

 // ---------- FLIP ----------
 if(mode==="flip"){

  const years=+$("years").value;
  const sell=+$("sell").value;
  const targetAnnual=+$("targetAnnual").value;

  if(sell){

   const profit=sell-total;
   const roi=(profit/total)*100;
   const annual=(Math.pow((sell/total),(1/years))-1)*100;

   $("output").innerHTML=`
   <b>–Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è:</b> $${total}<br>
   <b>–ü—Ä–∏–±—É—Ç–æ–∫:</b> $${profit}<br>
   <b>ROI:</b> ${roi.toFixed(2)}%<br>
   <b>–†—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å:</b> ${annual.toFixed(2)}%
   `;

  } else if(targetAnnual){

   const neededSell=total*Math.pow((1+targetAnnual/100),years);

   $("output").innerHTML=`
   –î–ª—è ${targetAnnual}% —Ä—ñ—á–Ω–∏—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ–¥–∞—Ç–∏ –∑–∞:<br><br>
   <b>$${neededSell.toFixed(0)}</b>
   `;

  }

 }

 // ---------- RENT ----------
 if(mode==="rent"){

  const rent=+$("rentMonthly").value;
  const expenses=+$("rentExpenses").value;
  const targetPayback=+$("targetPayback").value;

  if(rent){

   const annualIncome=rent*12;
   const net=annualIncome-expenses;
   const roi=(net/total)*100;
   const payback=total/net;

   $("output").innerHTML=`
   <b>–Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è:</b> $${total}<br>
   <b>–ß–∏—Å—Ç–∏–π —Ä—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥:</b> $${net}<br>
   <b>ROI:</b> ${roi.toFixed(2)}%<br>
   <b>–û–∫—É–ø–Ω—ñ—Å—Ç—å:</b> ${payback.toFixed(1)} —Ä–æ–∫—ñ–≤
   `;

  } else if(targetPayback){

   const neededNet=total/targetPayback;
   const neededRent=(neededNet+expenses)/12;

   $("output").innerHTML=`
   –î–ª—è –æ–∫—É–ø–Ω–æ—Å—Ç—ñ ${targetPayback} —Ä–æ–∫—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –æ—Ä–µ–Ω–¥–∞:<br><br>
   <b>$${neededRent.toFixed(0)} / –º—ñ—Å</b>
   `;

  }

 }

}

async function generatePDF(){

 const { jsPDF } = window.jspdf;
 const doc=new jsPDF();
 doc.text("Invest PRO Report",20,20);

 const text=document.getElementById("output").innerText;
 doc.text(text,20,40);

 doc.save("Invest_PRO_Report.pdf");
}

calculate();

</script>

</body>
</html>
