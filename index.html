<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Invest PRO 3.0 ($)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
 --bg:#f4f6f9;
 --card:#ffffff;
 --text:#1b1f24;
 --accent:#2563eb;
 --result:#eef2ff;
}
body.dark{
 --bg:#0f172a;
 --card:#1e293b;
 --text:#f1f5f9;
 --accent:#3b82f6;
 --result:#1e3a8a;
}
body{
 font-family:-apple-system,BlinkMacSystemFont,sans-serif;
 background:var(--bg);
 color:var(--text);
 padding:30px;
}
.card{
 background:var(--card);
 padding:25px;
 border-radius:16px;
 max-width:1100px;
 margin:auto;
}
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:30px;
}
.field{margin-bottom:15px;}
label{font-weight:600;display:block;margin-bottom:6px;}
input,select{
 width:100%;
 padding:10px;
 border-radius:8px;
 border:1px solid #ccc;
}
button{
 padding:12px 18px;
 border:none;
 background:var(--accent);
 color:white;
 border-radius:10px;
 font-weight:600;
 cursor:pointer;
 margin-top:10px;
 margin-right:10px;
}
.result{
 margin-top:25px;
 padding:20px;
 background:var(--result);
 border-radius:12px;
}
</style>
</head>

<body>

<div class="card">

<h2>Invest PRO 3.0 ($)</h2>

<button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
<button onclick="generatePDF()">PDF</button>

<div class="field">
<label>–†–µ–∂–∏–º</label>
<select id="mode">
<option value="flip">–§–ª—ñ–ø</option>
<option value="rent">–û—Ä–µ–Ω–¥–∞</option>
</select>
</div>

<div class="grid">

<div>

<div class="field">
<label>–¶—ñ–Ω–∞ –∫—É–ø—ñ–≤–ª—ñ ($)</label>
<input type="number" id="buy" value="60000">
</div>

<div class="field">
<label>–î–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="extra" value="10000">
</div>

<div class="flip">
<div class="field">
<label>–¢–µ—Ä–º—ñ–Ω (—Ä–æ–∫–∏)</label>
<input type="number" id="years" value="2">
</div>

<div class="field">
<label>–¶—ñ–Ω–∞ –ø—Ä–æ–¥–∞–∂—É ($)</label>
<input type="number" id="sell" value="85000">
</div>
</div>

<div class="rent" style="display:none;">
<div class="field">
<label>–û—Ä–µ–Ω–¥–∞ –≤ –º—ñ—Å—è—Ü—å ($)</label>
<input type="number" id="rentMonthly" value="700">
</div>

<div class="field">
<label>–†—ñ—á–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ ($)</label>
<input type="number" id="rentExpenses" value="1500">
</div>
</div>

<button onclick="calculate()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>

</div>

<div>
<div class="result" id="output"></div>
<canvas id="chart" style="margin-top:20px;"></canvas>
</div>

</div>

</div>

<script>

const $=id=>document.getElementById(id);
let chart;

$("mode").addEventListener("change",()=>{
 const mode=$("mode").value;
 document.querySelector(".flip").style.display=mode==="flip"?"block":"none";
 document.querySelector(".rent").style.display=mode==="rent"?"block":"none";
});

function toggleTheme(){
 document.body.classList.toggle("dark");
}

function calculate(){

 const mode=$("mode").value;
 const buy=+$("buy").value;
 const extra=+$("extra").value;
 const total=buy+extra;

 if(chart) chart.destroy();

 if(mode==="flip"){

  const years=+$("years").value;
  const sell=+$("sell").value;

  const profit=sell-total;
  const roi=(profit/total)*100;
  const annual=(Math.pow((sell/total),(1/years))-1)*100;

  $("output").innerHTML=`
  <b>–ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è:</b> $${total}<br>
  <b>–ß–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫:</b> $${profit}<br>
  <b>ROI:</b> ${roi.toFixed(2)}%<br>
  <b>–†—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å:</b> ${annual.toFixed(2)}%<br><br>

  <hr>

  <b>–î–ª—è —Ä—ñ–µ–ª—Ç–æ—Ä–∞:</b><br>
  ROI = (–ü—Ä–∏–±—É—Ç–æ–∫ / –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è) √ó 100<br>
  Annual = (–§—ñ–Ω–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å / –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è)^(1/—Ä–æ–∫–∏) ‚àí 1
  `;

  const values=[];
  for(let i=0;i<=years;i++){
   values.push(total*Math.pow((sell/total),(i/years)));
  }

  chart=new Chart($("chart"),{
   type:"line",
   data:{
    labels:values.map((_,i)=>"–†—ñ–∫ "+i),
    datasets:[{
     label:"–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –∫–∞–ø—ñ—Ç–∞–ª—É",
     data:values,
     borderColor:"#2563eb",
     fill:false
    }]
   }
  });

 }

 if(mode==="rent"){

  const rent=+$("rentMonthly").value;
  const expenses=+$("rentExpenses").value;

  const annualIncome=rent*12;
  const net=annualIncome-expenses;
  const roi=(net/total)*100;
  const payback=total/net;

  $("output").innerHTML=`
  <b>–ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è:</b> $${total}<br>
  <b>–†—ñ—á–Ω–∏–π —á–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥:</b> $${net}<br>
  <b>ROI:</b> ${roi.toFixed(2)}%<br>
  <b>–û–∫—É–ø–Ω—ñ—Å—Ç—å:</b> ${payback.toFixed(1)} —Ä–æ–∫—ñ–≤<br><br>

  <hr>

  <b>–î–ª—è —Ä—ñ–µ–ª—Ç–æ—Ä–∞:</b><br>
  ROI = –ß–∏—Å—Ç–∏–π —Ä—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥ / –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è<br>
  Payback = –Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è / –ß–∏—Å—Ç–∏–π —Ä—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥
  `;

  const values=[];
  for(let i=0;i<=Math.ceil(payback);i++){
   values.push(net*i);
  }

  chart=new Chart($("chart"),{
   type:"line",
   data:{
    labels:values.map((_,i)=>"–†—ñ–∫ "+i),
    datasets:[{
     label:"–ù–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –¥–æ—Ö–æ–¥—É",
     data:values,
     borderColor:"#16a34a",
     fill:false
    }]
   }
  });

 }

}

async function generatePDF(){

 const { jsPDF } = window.jspdf;
 const doc=new jsPDF();

 doc.text("Invest PRO Report",20,20);

 const text=document.getElementById("output").innerText;
 doc.text(text,20,40);

 const canvas=document.getElementById("chart");
 const img=canvas.toDataURL("image/png",1.0);

 doc.addImage(img,"PNG",15,80,180,90);

 doc.save("Invest_PRO_Report.pdf");
}

calculate();

</script>

</body>
</html>
